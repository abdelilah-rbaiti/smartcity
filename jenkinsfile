pipeline {
  agent any
  stages { 
    stage('Checkout') {
      steps {
        checkout scm
        sh 'echo "Checkout passed successfully"'
      }
    }
 stage('Detect Secrets with GitLeaks') {
            steps {
                script {
                    sh 'cd gitleaks && go build && sudo mv gitleaks /usr/local/bin/'
                    sh 'gitleaks --repo=https://github.com/abdelilah-rbaiti/smartcity.git'
                }
            }
        }
  }
}

